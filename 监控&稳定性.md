### 监控、稳定性

- [监控、稳定性](#toc_0)
- - [业务日志是通过什么方式来收集的？](#toc_1)
  - [线上机器如何监控？采用什么开源产品或者自研的产品？它是分钟级的还是秒级的？](#toc_2)
  - [如果让你来想办法收集一个JAVA后端应用的性能数据，你会在意哪些方面? 你会选择什么样的工具、思路来收集?](#toc_3)
  - [一般你调用第三方的时候会不会监控调用情况？](#toc_4)

---

#### 业务日志是通过什么方式来收集的？

**方案一：通过日志组件来收集**

这里是指通过logback、log4j等日志组件来输出文件，然后再通过文件输出到logstash、kibana等日志组件中，通过这些日志组件来进行可视化统计与分析，这里需要统一关键日志输出格式方便日后统计搜索。

**方案二：使用aop来拦截controller**

拦截controller层，通过controller中的方法名是否包含insert、update、delete等关键字来记录业务日志。

**方案三：使用注解来，进行稍微精准的业务日志记录**

这个方案粒度可大可小，代码侵入性也比较小，可操作性比较强，如果需要获取参数信息或者返回值信息，可以通过注解配置获取到，可以集合fastjson中的jpath来获取参数值下面有几个伪代码供参考

**方案四：针对复杂场景或者审计需求手动记录，侵入性强**

如果有些业务公用了方法，需要更小的粒度，或者需要记录业务数据变更记录，这时就只能选择侵入式较强的方式来记录日志了，直接再业务代码中记录日志

**方案五：记录sql日志**

则可以使用mybatis拦截器来进行，如果没有使用mybatis，则可以做一个通用的preparestatement以及statement代理。

#### 线上机器如何监控？采用什么开源产品或者自研的产品？它是分钟级的还是秒级的？

#### 如果让你来想办法收集一个JAVA后端应用的性能数据，你会在意哪些方面? 你会选择什么样的工具、思路来收集?

#### 一般你调用第三方的时候会不会监控调用情况？

通过条件筛选，提供Long-url、Long sql、Long sevice、Long call筛选条件，可以自行组合，调整时间长度。(Promblem)**使用cat定位需要优化的接口？**

1.查看调用链，定位哪个方法调用时间长

发现接口存在循环调用，优化方案：调用批量操作接口，减少接口调用次数。

2.慢sql优化方法

第一步：explain查看sql执行计划，确认sql是否走索引。

第二步：确认数据库表是否建立索引，如果没有索引，创建合适的索引，保持最左原则。

第三步：如果存在索引，没有索引，分析其中原因

第四步：如果sql走了索引，依然很慢，缓存中间结果(异构一张中间表或者将结果缓存到redis中)
————————————————
版权声明：本文为CSDN博主「少学汉」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_27224119/article/details/112664530
